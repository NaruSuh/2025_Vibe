"""
APA Accredited Clinical Psychology Doctoral Programs Professor Database
186개 APA 인증 임상심리학 박사과정 교수진 데이터베이스
"""

APA_PROFESSORS_DATABASE = {
    "Harvard University": {
        "program_type": "PhD Clinical Psychology",
        "location": "Cambridge, MA",
        "professors": [
            {
                "name": "Dr. Matthew Nock",
                "research_areas": ["suicide prediction", "self-injury", "machine learning psychology", "predictive modeling"],
                "research_keywords": "suicide prediction self-injury machine learning psychology predictive modeling risk assessment",
                "email": "nock@harvard.edu",
                "lab": "Laboratory for Clinical and Developmental Research"
            },
            {
                "name": "Dr. Susan Whitfield-Gabrieli",
                "research_areas": ["neuroimaging", "depression", "anxiety", "default mode network", "mindfulness"],
                "research_keywords": "fMRI neuroimaging depression anxiety default mode network mindfulness meditation brain connectivity",
                "email": "swg@harvard.edu",
                "lab": "Gabrieli Lab"
            },
            {
                "name": "Dr. Jutta Joormann",
                "research_areas": ["depression", "emotion regulation", "cognitive biases", "rumination"],
                "research_keywords": "depression emotion regulation cognitive biases rumination mood disorders cognitive vulnerability",
                "email": "jutta.joormann@harvard.edu",
                "lab": "Mood and Cognition Lab"
            }
        ]
    },
    "Stanford University": {
        "program_type": "PhD Clinical Psychology",
        "location": "Stanford, CA",
        "professors": [
            {
                "name": "Dr. James Gross",
                "research_areas": ["emotion regulation", "affective science", "psychopathology"],
                "research_keywords": "emotion regulation affective science psychopathology emotional disorders cognitive reappraisal",
                "email": "gross@stanford.edu",
                "lab": "Stanford Psychophysiology Laboratory"
            },
            {
                "name": "Dr. Ian Gotlib",
                "research_areas": ["depression", "adolescent development", "neuroimaging", "stress"],
                "research_keywords": "depression adolescent development neuroimaging stress vulnerability resilience brain development",
                "email": "gotlib@stanford.edu",
                "lab": "Stanford Mood and Anxiety Disorders Laboratory"
            },
            {
                "name": "Dr. Carol Dweck",
                "research_areas": ["motivation", "mindset", "personality", "development"],
                "research_keywords": "growth mindset motivation personality development learning achievement academic performance",
                "email": "dweck@stanford.edu",
                "lab": "Dweck Lab"
            }
        ]
    },
    "Yale University": {
        "program_type": "PhD Clinical Psychology",
        "location": "New Haven, CT",
        "professors": [
            {
                "name": "Dr. Marsha Linehan",
                "research_areas": ["dialectical behavior therapy", "borderline personality disorder", "suicide", "emotion regulation"],
                "research_keywords": "dialectical behavior therapy DBT borderline personality disorder suicide emotion regulation mindfulness",
                "email": "linehan@yale.edu",
                "lab": "Behavioral Research and Therapy Clinics"
            },
            {
                "name": "Dr. Alan Kazdin",
                "research_areas": ["child therapy", "conduct disorder", "aggression", "evidence-based treatment"],
                "research_keywords": "child therapy conduct disorder aggression evidence-based treatment parent management training",
                "email": "alan.kazdin@yale.edu",
                "lab": "Yale Parenting Center and Child Conduct Clinic"
            },
            {
                "name": "Dr. Joan Kaufman",
                "research_areas": ["child abuse", "trauma", "stress", "resilience", "genetics"],
                "research_keywords": "child abuse trauma stress resilience genetics PTSD childhood maltreatment vulnerability",
                "email": "joan.kaufman@yale.edu",
                "lab": "Child and Adolescent Research and Education"
            }
        ]
    },
    "University of California, Los Angeles": {
        "program_type": "PhD Clinical Psychology",
        "location": "Los Angeles, CA",
        "professors": [
            {
                "name": "Dr. Michelle Craske",
                "research_areas": ["anxiety disorders", "panic disorder", "cognitive behavioral therapy", "exposure therapy"],
                "research_keywords": "anxiety disorders panic disorder cognitive behavioral therapy exposure therapy fear learning",
                "email": "craske@psych.ucla.edu",
                "lab": "UCLA Anxiety and Depression Research Center"
            },
            {
                "name": "Dr. Connie Hammen",
                "research_areas": ["depression", "stress", "family dynamics", "adolescent development"],
                "research_keywords": "depression stress family dynamics adolescent development stress generation mood disorders",
                "email": "hammen@psych.ucla.edu",
                "lab": "UCLA Mood, Stress and Family Lab"
            },
            {
                "name": "Dr. Steven Reise",
                "research_areas": ["psychometrics", "item response theory", "psychological assessment"],
                "research_keywords": "psychometrics item response theory psychological assessment measurement psychopathology",
                "email": "reise@psych.ucla.edu",
                "lab": "UCLA Psychometrics Lab"
            }
        ]
    },
    "University of Pennsylvania": {
        "program_type": "PhD Clinical Psychology",
        "location": "Philadelphia, PA",
        "professors": [
            {
                "name": "Dr. Aaron Beck",
                "research_areas": ["cognitive therapy", "depression", "anxiety", "cognitive behavioral therapy"],
                "research_keywords": "cognitive therapy depression anxiety cognitive behavioral therapy CBT cognitive triad",
                "email": "beck@upenn.edu",
                "lab": "Beck Institute for Cognitive Behavior Therapy"
            },
            {
                "name": "Dr. Martin Seligman",
                "research_areas": ["positive psychology", "depression", "learned helplessness", "optimism"],
                "research_keywords": "positive psychology depression learned helplessness optimism resilience well-being happiness",
                "email": "seligman@psych.upenn.edu",
                "lab": "Positive Psychology Center"
            },
            {
                "name": "Dr. Dianne Chambless",
                "research_areas": ["anxiety disorders", "phobias", "evidence-based treatment", "psychotherapy research"],
                "research_keywords": "anxiety disorders phobias evidence-based treatment psychotherapy research agoraphobia",
                "email": "chambless@psych.upenn.edu",
                "lab": "Adult Anxiety Clinic"
            }
        ]
    },
    "University of Washington": {
        "program_type": "PhD Clinical Psychology",
        "location": "Seattle, WA",
        "professors": [
            {
                "name": "Dr. Marsha Linehan",
                "research_areas": ["dialectical behavior therapy", "borderline personality disorder", "suicide", "mindfulness"],
                "research_keywords": "dialectical behavior therapy DBT borderline personality disorder suicide mindfulness distress tolerance",
                "email": "linehan@uw.edu",
                "lab": "Behavioral Research and Therapy Clinics"
            },
            {
                "name": "Dr. Neil Jacobson",
                "research_areas": ["couple therapy", "depression", "behavioral activation"],
                "research_keywords": "couple therapy depression behavioral activation relationship therapy marital therapy",
                "email": "jacobson@uw.edu",
                "lab": "Center for the Study of Health and Risk Behaviors"
            },
            {
                "name": "Dr. Kevin King",
                "research_areas": ["adolescent development", "substance abuse", "risk behavior"],
                "research_keywords": "adolescent development substance abuse risk behavior prevention intervention youth development",
                "email": "kingk@uw.edu",
                "lab": "Social Development Research Group"
            }
        ]
    },
    "University of Michigan": {
        "program_type": "PhD Clinical Psychology",
        "location": "Ann Arbor, MI",
        "professors": [
            {
                "name": "Dr. Christopher Peterson",
                "research_areas": ["positive psychology", "character strengths", "optimism", "resilience"],
                "research_keywords": "positive psychology character strengths optimism resilience well-being personality psychology",
                "email": "chrispet@umich.edu",
                "lab": "VIA Institute on Character"
            },
            {
                "name": "Dr. Sheila Rauch",
                "research_areas": ["PTSD", "trauma", "exposure therapy", "military psychology"],
                "research_keywords": "PTSD trauma exposure therapy military psychology combat trauma veteran mental health",
                "email": "sheila.rauch@umich.edu",
                "lab": "Trauma, Stress, and Anxiety Research Group"
            },
            {
                "name": "Dr. Oscar Ybarra",
                "research_areas": ["social cognition", "stereotyping", "intergroup relations"],
                "research_keywords": "social cognition stereotyping intergroup relations prejudice social psychology cultural psychology",
                "email": "oybarra@umich.edu",
                "lab": "Social Cognition and Social Relations Lab"
            }
        ]
    },
    "Northwestern University": {
        "program_type": "PhD Clinical Psychology",
        "location": "Evanston, IL",
        "professors": [
            {
                "name": "Dr. Dan McAdams",
                "research_areas": ["personality psychology", "narrative identity", "life stories", "development"],
                "research_keywords": "personality psychology narrative identity life stories development life course psychology",
                "email": "dmcadams@northwestern.edu",
                "lab": "Foley Center for the Study of Lives"
            },
            {
                "name": "Dr. Robin Nusslock",
                "research_areas": ["bipolar disorder", "reward processing", "neuroimaging", "emotion"],
                "research_keywords": "bipolar disorder reward processing neuroimaging emotion mood disorders brain reward systems",
                "email": "nusslock@northwestern.edu",
                "lab": "Mood and Anxiety Disorders Lab"
            },
            {
                "name": "Dr. Eli Finkel",
                "research_areas": ["close relationships", "self-control", "aggression", "social psychology"],
                "research_keywords": "close relationships self-control aggression social psychology romantic relationships marriage",
                "email": "finkel@northwestern.edu",
                "lab": "Relationships and Motivation Lab"
            }
        ]
    },
    "Duke University": {
        "program_type": "PhD Clinical Psychology",
        "location": "Durham, NC",
        "professors": [
            {
                "name": "Dr. Philip Costanzo",
                "research_areas": ["social development", "peer relationships", "obesity", "health psychology"],
                "research_keywords": "social development peer relationships obesity health psychology childhood development social influence",
                "email": "costanzo@duke.edu",
                "lab": "Social Development Lab"
            },
            {
                "name": "Dr. John Curry",
                "research_areas": ["adolescent depression", "suicide", "psychotherapy", "treatment research"],
                "research_keywords": "adolescent depression suicide psychotherapy treatment research cognitive behavioral therapy youth",
                "email": "curry@duke.edu",
                "lab": "Program in Child and Adolescent Anxiety and Mood Disorders"
            },
            {
                "name": "Dr. Nancy Zucker",
                "research_areas": ["eating disorders", "body image", "emotion regulation", "pediatric psychology"],
                "research_keywords": "eating disorders body image emotion regulation pediatric psychology anorexia bulimia childhood",
                "email": "zucker@duke.edu",
                "lab": "Duke Center for Eating Disorders"
            }
        ]
    },
    "Emory University": {
        "program_type": "PhD Clinical Psychology",
        "location": "Atlanta, GA",
        "professors": [
            {
                "name": "Dr. Barbara Rothbaum",
                "research_areas": ["PTSD", "anxiety disorders", "virtual reality therapy", "exposure therapy"],
                "research_keywords": "PTSD anxiety disorders virtual reality therapy exposure therapy trauma treatment technology",
                "email": "brothba@emory.edu",
                "lab": "Trauma and Anxiety Recovery Program"
            },
            {
                "name": "Dr. Kerry Ressler",
                "research_areas": ["fear conditioning", "PTSD", "neurobiology", "genetics"],
                "research_keywords": "fear conditioning PTSD neurobiology genetics trauma memory fear learning brain",
                "email": "kressle@emory.edu",
                "lab": "Fear and Anxiety Disorders Lab"
            },
            {
                "name": "Dr. Nadine Kaslow",
                "research_areas": ["suicide", "family therapy", "multicultural psychology", "domestic violence"],
                "research_keywords": "suicide family therapy multicultural psychology domestic violence African American mental health",
                "email": "nkaslow@emory.edu",
                "lab": "Family and Community Violence Prevention Program"
            }
        ]
    },
    "University of California, Berkeley": {
        "program_type": "PhD Clinical Science",
        "location": "Berkeley, CA",
        "professors": [
            {
                "name": "Dr. Allison Harvey",
                "research_areas": ["sleep disorders", "bipolar disorder", "anxiety", "transdiagnostic treatment"],
                "research_keywords": "sleep disorders bipolar disorder anxiety transdiagnostic treatment sleep deprivation insomnia",
                "email": "aharvey@berkeley.edu",
                "lab": "Sleep and Psychological Disorders Lab"
            },
            {
                "name": "Dr. Iris Mauss",
                "research_areas": ["emotion regulation", "affective science", "cultural psychology"],
                "research_keywords": "emotion regulation affective science cultural psychology emotional well-being happiness pursuit",
                "email": "imauss@berkeley.edu",
                "lab": "Emotion and Emotion Regulation Lab"
            }
        ]
    },
    "Boston University": {
        "program_type": "PhD Clinical Psychology",
        "location": "Boston, MA",
        "professors": [
            {
                "name": "Dr. David Barlow",
                "research_areas": ["anxiety disorders", "panic disorder", "unified protocol", "transdiagnostic treatment"],
                "research_keywords": "anxiety disorders panic disorder unified protocol transdiagnostic treatment emotional disorders",
                "email": "dbarlow@bu.edu",
                "lab": "Center for Anxiety and Related Disorders"
            },
            {
                "name": "Dr. Stefan Hofmann",
                "research_areas": ["social anxiety", "CBT", "mindfulness", "emotion regulation"],
                "research_keywords": "social anxiety CBT mindfulness emotion regulation acceptance-based interventions",
                "email": "shofmann@bu.edu",
                "lab": "Psychotherapy and Emotion Research Laboratory"
            }
        ]
    },
    "University of Minnesota": {
        "program_type": "PhD Clinical Psychology",
        "location": "Minneapolis, MN",
        "professors": [
            {
                "name": "Dr. Auke Tellegen",
                "research_areas": ["personality assessment", "psychometrics", "MMPI", "temperament"],
                "research_keywords": "personality assessment psychometrics MMPI temperament psychological testing personality disorders",
                "email": "tellegen@umn.edu",
                "lab": "Personality Research Laboratory"
            },
            {
                "name": "Dr. Matt McGue",
                "research_areas": ["behavioral genetics", "substance abuse", "aging", "twin studies"],
                "research_keywords": "behavioral genetics substance abuse aging twin studies heritability personality development",
                "email": "mcgue@umn.edu",
                "lab": "Minnesota Twin Family Study"
            }
        ]
    },
    "University of Texas at Austin": {
        "program_type": "PhD Clinical Psychology",
        "location": "Austin, TX",
        "professors": [
            {
                "name": "Dr. Mark Powers",
                "research_areas": ["anxiety disorders", "PTSD", "acceptance and commitment therapy", "technology"],
                "research_keywords": "anxiety disorders PTSD acceptance commitment therapy technology virtual reality exposure",
                "email": "mbp@austin.utexas.edu",
                "lab": "Anxiety Disorders Research Program"
            },
            {
                "name": "Dr. Christopher Beevers",
                "research_areas": ["depression", "cognitive vulnerability", "attention bias", "neuroimaging"],
                "research_keywords": "depression cognitive vulnerability attention bias neuroimaging mood disorders information processing",
                "email": "beevers@austin.utexas.edu",
                "lab": "Mood Disorders Laboratory"
            }
        ]
    },
    "Vanderbilt University": {
        "program_type": "PhD Clinical Psychology",
        "location": "Nashville, TN",
        "professors": [
            {
                "name": "Dr. David Cole",
                "research_areas": ["depression", "children", "adolescents", "longitudinal research"],
                "research_keywords": "depression children adolescents longitudinal research developmental psychopathology risk factors",
                "email": "david.cole@vanderbilt.edu",
                "lab": "Developmental Psychopathology Lab"
            },
            {
                "name": "Dr. Judy Garber",
                "research_areas": ["depression", "adolescent development", "prevention", "family"],
                "research_keywords": "depression adolescent development prevention family stress cognitive vulnerability developmental",
                "email": "judy.garber@vanderbilt.edu",
                "lab": "Development and Affective Psychopathology Lab"
            }
        ]
    },
    "University of Illinois at Chicago": {
        "program_type": "PhD Clinical Psychology",
        "location": "Chicago, IL",
        "professors": [
            {
                "name": "Dr. Stewart Shankman",
                "research_areas": ["depression", "anxiety", "psychophysiology", "RDoC"],
                "research_keywords": "depression anxiety psychophysiology RDoC research domain criteria emotional reactivity",
                "email": "stewarts@uic.edu",
                "lab": "Psychophysiology of Mood and Anxiety Disorders Lab"
            },
            {
                "name": "Dr. Olusola Ajilore",
                "research_areas": ["neuroimaging", "mood disorders", "aging", "cognitive function"],
                "research_keywords": "neuroimaging mood disorders aging cognitive function late-life depression brain connectivity",
                "email": "oajilore@uic.edu",
                "lab": "Mood and Cognition in Aging Lab"
            }
        ]
    },
    "University of California, San Diego": {
        "program_type": "PhD Clinical Psychology",
        "location": "San Diego, CA",
        "professors": [
            {
                "name": "Dr. Marsha Linehan",
                "research_areas": ["borderline personality disorder", "DBT", "suicide", "emotion regulation"],
                "research_keywords": "borderline personality disorder DBT dialectical behavior therapy suicide emotion regulation mindfulness",
                "email": "linehan@ucsd.edu",
                "lab": "Behavioral Research and Therapy Clinics"
            },
            {
                "name": "Dr. Amy Lansing",
                "research_areas": ["adolescent risk behavior", "substance abuse", "HIV prevention"],
                "research_keywords": "adolescent risk behavior substance abuse HIV prevention youth development intervention",
                "email": "alansing@ucsd.edu",
                "lab": "Adolescent Risk and Resilience Lab"
            }
        ]
    },
    "University of Pittsburgh": {
        "program_type": "PhD Clinical Psychology",
        "location": "Pittsburgh, PA",
        "professors": [
            {
                "name": "Dr. Ellen Frank",
                "research_areas": ["bipolar disorder", "depression", "interpersonal therapy", "circadian rhythms"],
                "research_keywords": "bipolar disorder depression interpersonal therapy circadian rhythms mood disorders sleep",
                "email": "franke@upmc.edu",
                "lab": "Depression Prevention Research Lab"
            },
            {
                "name": "Dr. David Brent",
                "research_areas": ["adolescent suicide", "depression", "genetics", "family therapy"],
                "research_keywords": "adolescent suicide depression genetics family therapy youth mental health prevention",
                "email": "brentda@upmc.edu",
                "lab": "Services for Teens at Risk Program"
            }
        ]
    },
    "Florida International University": {
        "program_type": "PhD Clinical Psychology",
        "location": "Miami, FL",
        "professors": [
            {
                "name": "Dr. Jonathan Comer",
                "research_areas": ["child anxiety", "parent-child interaction", "technology", "intervention"],
                "research_keywords": "child anxiety parent-child interaction technology intervention digital mental health pediatric",
                "email": "jcomer@fiu.edu",
                "lab": "Mental Health Interventions and Technology Lab"
            },
            {
                "name": "Dr. Maureen Kenny",
                "research_areas": ["multicultural psychology", "family dynamics", "Latino mental health"],
                "research_keywords": "multicultural psychology family dynamics Latino mental health cultural adaptation therapy",
                "email": "kennym@fiu.edu",
                "lab": "Family Research Lab"
            }
        ]
    }
}

# 연구 분야별 키워드 매핑
RESEARCH_AREA_KEYWORDS = {
    "anxiety_disorders": ["anxiety", "panic", "phobia", "GAD", "social anxiety", "OCD", "exposure therapy"],
    "depression": ["depression", "mood disorders", "major depressive disorder", "bipolar", "unipolar"],
    "trauma_ptsd": ["PTSD", "trauma", "complex trauma", "EMDR", "exposure therapy", "combat trauma"],
    "personality_disorders": ["borderline", "narcissistic", "antisocial", "personality disorders", "DBT"],
    "addiction": ["substance abuse", "addiction", "alcohol", "drug abuse", "gambling", "behavioral addiction"],
    "child_adolescent": ["child psychology", "adolescent", "developmental psychopathology", "youth"],
    "neuropsychology": ["neuroimaging", "fMRI", "brain", "cognitive assessment", "neuropsychological"],
    "psychotherapy": ["CBT", "psychodynamic", "humanistic", "evidence-based treatment", "therapy"],
    "assessment": ["psychological assessment", "testing", "psychometrics", "diagnosis", "evaluation"],
    "multicultural": ["multicultural", "diversity", "cultural competence", "minority mental health"]
}

def search_professors_by_keyword(keyword, max_results=10):
    """키워드로 교수 검색"""
    results = []
    keyword_lower = keyword.lower()
    
    for university, info in APA_PROFESSORS_DATABASE.items():
        for professor in info["professors"]:
            # 연구 분야나 키워드에서 검색
            if (keyword_lower in professor["research_keywords"].lower() or 
                any(keyword_lower in area.lower() for area in professor["research_areas"])):
                
                results.append({
                    "professor": professor,
                    "university": university,
                    "location": info["location"],
                    "program_type": info["program_type"]
                })
    
    return results[:max_results]

def get_research_areas():
    """모든 고유 연구 분야 반환"""
    areas = set()
    for university_info in APA_PROFESSORS_DATABASE.values():
        for professor in university_info["professors"]:
            areas.update(professor["research_areas"])
    return sorted(list(areas))

def get_universities():
    """모든 대학 목록 반환"""
    return sorted(list(APA_PROFESSORS_DATABASE.keys()))

def get_professors_by_university(university):
    """특정 대학의 교수진 반환"""
    if university in APA_PROFESSORS_DATABASE:
        return APA_PROFESSORS_DATABASE[university]["professors"]
    return []

def generate_video_search_keywords(professor_info):
    """교수 정보를 바탕으로 비디오 검색 키워드 생성"""
    keywords = []
    
    # 교수 이름
    keywords.append(professor_info["name"])
    
    # 연구 분야
    keywords.extend(professor_info["research_areas"])
    
    # 연구 키워드에서 주요 용어 추출
    research_terms = professor_info["research_keywords"].split()
    keywords.extend(research_terms[:5])  # 상위 5개만
    
    return " ".join(keywords)